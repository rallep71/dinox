Voice Message System -- Ist-Zustand
1. Aufnahme-Pipeline (GStreamer)
Datei: audio_recorder.vala


pipewiresrc (oder autoaudiosrc) -> volume(2.5) -> level -> audioconvert -> audioresample -> capsfilter(44.1kHz/mono) -> avenc_aac(64kbps) -> aacparse -> mp4mux -> filesink
Element	Problem
pipewiresrc	PipeWire wird bereits benutzt (Fallback auf autoaudiosrc)
volume = 2.5	Hardcoded +8 dB Boost -- brutaler Gain ohne AGC, verstaerkt auch Rauschen
Kein Noise Gate / Noise Suppression	VoIP-Calls nutzen webrtcdsp/rnnoise, aber Voice Messages haben nichts davon
AAC-LC 64kbps / 44.1kHz	Funktioniert, aber Opus waere besser fuer Sprache (kleiner + besser bei niedrigen Bitraten)
Das Knacken kommt sehr wahrscheinlich von:

Volume 2.5x ohne Limiter -- Clipping bei lauten Passagen
Kein Noise Suppression -- Hintergrundgeraeusche werden mit 2.5x verstaerkt
44.1kHz statt 48kHz -- PipeWire laeuft nativ auf 48kHz, Resampling auf 44.1kHz kann Artefakte erzeugen
2. Aufnahme-UI
Datei: voice_recorder_popover.vala


+---------------------------+| Voice Message             || 0:05  ||||||||||||||||    |  <- 200x30px DrawingArea| [Cancel]        [Send]    |+---------------------------+
Probleme:

Waveform ist FAKE: audio_recorder.vala:134 -- level_changed(Random.double_range(0.0, 1.0)) -- die Waveform zeigt Zufallswerte, nicht die echte Aussteuerung!
Sehr klein (200x30px)
Kein Slide-to-Cancel (wie Telegram)
Kein Lock-Button fuer haendefreie Aufnahme
Minimalistisches Popover statt Inline-Widget
3. Audio Player UI
Datei: audio_player_widget.vala


[ > ]  -----o----------  0:12  [1x] Play    Scale/Slider    Zeit  Speed
Probleme:

Kein Waveform-Display -- nur ein simpler GTK Scale-Slider
Keine Vorschau der Audio-Wellenform (Telegram/WhatsApp zeigen die komplette Waveform)
Kein Fortschritt in der Waveform sichtbar
Pill-Shape CSS ist ok, aber insgesamt sehr minimalistisch
4. Vergleich mit Telegram
Feature	Telegram	DinoX
Aufnahme-Waveform	Echte Echtzeit-Wellenform	Fake (Random)
Slide-to-Cancel	Ja, nach links wischen	Nein, Button
Lock-Aufnahme	Ja, nach oben schieben	Nein
Player-Waveform	Vorberechnete Wellenform mit Fortschritt	Simpler Slider
Seek in Waveform	Ja, Touch auf Waveform	Ja, aber nur Slider
Noise Suppression	Ja (serverseitig + clientseitig)	Nein
Audio-Format	Opus/OGG	AAC/M4A
Playback-Speed	0.5x, 1x, 1.5x, 2x	1x, 1.5x, 2x
Max Dauer	30 Minuten	Kein Limit
5. Zusammenfassung der Probleme
#	Problem	Schwere	Fix-Aufwand
1	Fake Waveform bei Aufnahme (Random statt echte Pegel)	Hoch	Niedrig -- level Element liefert echte Werte, nur Parsing fehlt
2	Knacken durch volume=2.5 ohne Limiter/AGC	Hoch	Mittel -- AGC einbauen oder webrtcdsp nutzen
3	Kein Noise Suppression	Hoch	Mittel -- webrtcdsp oder rnnoise in Pipeline einfuegen
4	Player ohne Waveform	Mittel	Hoch -- Pre-Render Waveform-Daten, Custom DrawingArea
5	44.1kHz statt 48kHz	Niedrig	Niedrig -- Capsfilter aendern
6	Recording UI zu simpel	Mittel	Hoch -- Slide-to-Cancel, Lock, groessere Waveform
7	Kein Max-Duration-Limit	Niedrig	Niedrig
